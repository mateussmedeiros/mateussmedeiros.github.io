I"C<p>Fala galera, faz um bom tempo que não posto nada aqui, e para compensar isso, hoje começarei uma nova série: <strong>Automação de Tarefas</strong>. Nesse primeiro post, falarei sobre o Gulp, meu automatizador de tarefas preferido.</p>

<p>Automatizadores de tarefas são ferramentas que ajudam nós, desenvolvedores, a realizar tarefas repetitivas, tais como: minificação de arquivos, concatenação, testes, entre outras coisas essenciais para o desenvolvimento de um código bom e rápido.</p>

<p>Agora que você já sabe para que um automatizador de tarefas serve, vamos botar a mão na massa!</p>

<h2 id="instalando-o-gulp">Instalando o Gulp</h2>

<p>Para instalar o Gulp, é necessário ter instalado em sua máquina, o <a href="https://nodejs.org/en/" target="_blank">Node.js</a>. Caso já tenha instalado, basta rodar o seguinte comando na sua linha de comando, para instalar o CLI:</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh">npm <span class="nb">install</span> <span class="nt">-g</span> gulp</code></pre></figure>

<p>Para verificar se o Gulp foi instalado corretamente, execute:</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh">gulp <span class="nt">-v</span></code></pre></figure>

<p>Se retornar a versão do Gulp, a instalação foi um sucesso.</p>

<h2 id="iniciando-a-automatização">Iniciando a automatização</h2>

<p>O Gulp faz uso do Gulpfile para a configuração das tarefas.</p>

<p>Para esse teste, criei a seguinte estrutura:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html">|teste-gulp/
|--src/
|----script.js
|----main.js
|--Gulpfile.js</code></pre></figure>

<p>Nele faremos a <strong>minificação</strong> dos arquivos <strong>js</strong>, e depois <strong>renomearemos</strong> os arquivos minificados. Para isso precisamos instalar alguns <a href="http://gulpjs.com/plugins/" target="_blank">plugins</a> - o Gulp faz uso desses plugins para a criação de tarefas - utilizaremos os seguintes plugins:</p>

<ul>
  <li><strong>gulp-uglify</strong>: para minificar os arquivos js.</li>
  <li><strong>gulp-rename</strong>: para renomear os arquivos minificados.</li>
</ul>

<p>Execute o comando abaixo para instalar os plugins:</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh">npm <span class="nb">install </span>gulp gulp-uglify gulp-rename <span class="nt">--save-dev</span></code></pre></figure>

<p>Instalamos novamente o Gulp. Porque o que foi instalado anteriormente foi o CLI - responsável por rodar o comando ‘gulp’ na linha de comando - e o instalado agora é o local, usado para rodar os testes no projeto. Agora, vamos criar o nosso Gulpfile:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Carregamos o Gulp e os plugins através da função 'require' do Node.js</span>
<span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gulp</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">uglify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gulp-uglify</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">rename</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">gulp-rename</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Definimos o diretório dos arquivos</span>
<span class="kd">var</span> <span class="nx">js</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">./src/*.js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Criamos uma nova tarefa através do 'gulp.task' e nomeamos de minify-js</span>
<span class="c1">// Essa tarefa será responsável por minificar os arquivos js</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">minify-js</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// Acessamos o diretório dos nossos arquivos js</span>
  <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="nx">js</span><span class="p">)</span>

  	<span class="c1">// Usamos o uglify para minificar os arquivos js</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">uglify</span><span class="p">())</span>

    <span class="c1">// Renomeamos com .min o final dos nossos arquivos js</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">rename</span><span class="p">({</span>
            <span class="na">suffix</span><span class="p">:</span> <span class="dl">'</span><span class="s1">.min</span><span class="dl">'</span>
        <span class="p">}))</span>

    <span class="c1">// Pasta de destino dos nossos arquivos minificados js</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="dl">'</span><span class="s1">./src/</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// Tarefa padrão quando executado o comando "gulp"</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">default</span><span class="dl">'</span><span class="p">,[</span><span class="dl">'</span><span class="s1">minify-js</span><span class="dl">'</span><span class="p">]);</span>
 
<span class="c1">// Tarefa que ficará monitorando os arquivos, caso tenha alguma alteração, ele rodará novamente, comando "gulp watch".</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">watch</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="nx">js</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">minify-js</span><span class="dl">'</span><span class="p">]);</span>
<span class="p">});</span></code></pre></figure>

<p>Feito isso, para rodar as tarefas, execute o comando:</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh">gulp</code></pre></figure>

<p>Ele executará todas as tarefas e ficará esperando mudanças nos arquivos.</p>

<h2 id="conclusão">Conclusão</h2>

<p>Como vimos, o Gulp é um ótimo automatizador de tarefas que facilita muito nosso desenvolvimento. Várias outras tarefas podem ser executadas, além da mostrada nesse tutorial. O Gulp é um projeto muito bacana, caso você queira contribuir, acesse o repositório no <a href="https://github.com/gulpjs/gulp" target="_blank">GitHub</a> e veja como você pode ajudar.</p>
:ET